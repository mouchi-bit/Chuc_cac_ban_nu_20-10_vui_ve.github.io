<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Ch√∫c M·ª´ng 20/10</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: radial-gradient(circle at center, #0b1220, #05080f);
      overflow: hidden;
      font-family: 'Dancing Script', cursive;
      color: white;
      flex-direction: column;
    }

    #countdown {
      font-size: 150px;
      font-weight: bold;
      color: #ff4d6d;
      text-shadow: 0 0 30px rgba(255,100,150,0.9);
      margin-bottom: 30px;
      font-family: 'Dancing Script', cursive;
    }

    #startBtn {
      padding: 20px 38px;
      font-size: 30px;
      font-weight: bold;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      background: linear-gradient(45deg, #ff4d6d, #ff9bd1);
      color: white;
      box-shadow: 0 12px 28px rgba(255,77,109,.8);
      transition: transform .2s;
      z-index: 3;
      display: none;
    }
    #startBtn:hover { transform: scale(1.2); }

    .messages {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      font-size: 70px;
      line-height: 1.6;
      width: 95%;
      max-width: 1000px;
      z-index: 2;
      font-family: 'Dancing Script', cursive;
    }

    .line {
      display: block;
      margin: 16px 0;
      opacity: 0;
      background: linear-gradient(90deg, #ff4d6d, #ffd1e8, #ff9bd1, #ff7aa2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 25px rgba(255, 150, 200, 1), 0 0 40px rgba(255, 100, 180, .9);
      animation: fadeInOut 4s forwards, wave 3s infinite ease-in-out;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(30px) scale(0.9); }
      20% { opacity: 1; transform: translateY(0) scale(1); }
      80% { opacity: 1; }
      100% { opacity: 0; transform: translateY(-30px) scale(0.9); }
    }

    @keyframes wave {
      0%, 100% { transform: translateY(0) scale(1); }
      25% { transform: translateY(-10px) scale(1.05); }
      50% { transform: translateY(5px) scale(0.98); }
      75% { transform: translateY(-6px) scale(1.02); }
    }

    .heart-container {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 600px; height: 500px;
      pointer-events: none;
      font-family: 'Dancing Script', cursive;
    }

    .heart-dot, .fly-heart {
      font-family: 'Dancing Script', cursive;
    }

    .heart-dot {
      position: absolute;
      font-size: 20px;
      color: #ff4d6d;
      text-shadow: 0 0 10px rgba(255,100,150,.9);
      opacity: 0;
      animation: appear 0.5s forwards;
    }

    @keyframes appear {
      from { opacity: 0; transform: scale(0.3); }
      to   { opacity: 1; transform: scale(1); }
    }

    .finalText {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
      background: linear-gradient(90deg, #ff3366, #ff99cc, #ff66b2, #ffccff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 25px rgba(255,100,180,.9), 0 0 40px rgba(255,150,220,1);
      text-align: center;
      opacity: 0;
      animation: finalTextShow 2.5s 1s forwards;
      font-family: 'Dancing Script', cursive;
    }

    @keyframes finalTextShow {
      from { opacity: 0; transform: translate(-50%, -50%) scale(0.7); }
      to   { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }

    .fly-heart {
      position: absolute;
      bottom: -40px;
      font-size: 22px;
      color: #ff6fb0;
      filter: drop-shadow(0 0 10px rgba(255,120,180,.9));
      animation: rise 6s linear infinite;
    }

    @keyframes rise {
      0%   { transform: translateY(0) scale(.7); opacity: 0; }
      10%  { opacity: 1; }
      90%  { opacity: 1; }
      100% { transform: translateY(-120vh) scale(1.8); opacity: 0; }
    }
  </style>
</head>
<body>
  <div id="countdown"></div>
  <button id="startBtn">üíñ B·∫•m v√†o ƒë√¢y üíñ</button>
  <div class="messages" id="messages"></div>

  <script>
    const countdownDiv = document.getElementById("countdown");
    const btn = document.getElementById("startBtn");
    const messagesDiv = document.getElementById("messages");

    // preload nh·∫°c
    const bgMusic = new Audio("https://files.catbox.moe/zhgrw0.mp3");
    bgMusic.preload = "auto";
    bgMusic.loop = true;

    let musicLoaded = false;
    bgMusic.addEventListener("canplaythrough", () => { musicLoaded = true; });

    // map s·ªë th√†nh ch·ªØ
    const numWords = ["Kh√¥ng","M·ªôt","Hai","Ba","B·ªën","NƒÉm"];
    let timeLeft = 5;

    const countdownInterval = setInterval(() => {
      if(timeLeft > 0){
        countdownDiv.textContent = numWords[timeLeft];
      } else {
        clearInterval(countdownInterval);
        countdownDiv.style.display = "none";
        btn.style.display = "inline-block";
      }
      timeLeft--;
    }, 1000);

    const sentences = [
      "üíê Nh√¢n ng√†y 20/10, ch√∫c c√°c b·∫°n n·ªØ lu√¥n r·∫°ng r·ª° üíê",
      "‚ú® Mong r·∫±ng n·ª• c∆∞·ªùi s·∫Ω lu√¥n n·ªü tr√™n m√¥i ‚ú®",
      "üå∏ H·∫°nh ph√∫c v√† y√™u th∆∞∆°ng s·∫Ω lu√¥n ·ªü quanh b·∫°n üå∏",
      "üéì V√† 4 nƒÉm ƒë·∫°i h·ªçc th·∫≠t ƒë·∫πp, ƒë·∫ßy k·ª∑ ni·ªám üéì"
    ];

    btn.addEventListener("click", () => {
      btn.style.display = "none";

      if (musicLoaded) { bgMusic.currentTime = 0; bgMusic.play(); }
      else { 
        bgMusic.addEventListener("canplaythrough", () => { bgMusic.currentTime = 0; bgMusic.play(); }, { once: true });
      }

      for (let i = 0; i < 20; i++) {
        const heart = document.createElement("div");
        heart.className = "fly-heart";
        heart.textContent = "‚ù§";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.fontSize = (16 + Math.random()*20) + "px";
        heart.style.animationDuration = (4 + Math.random()*3) + "s";
        heart.style.animationDelay = (Math.random()*5) + "s";
        document.body.appendChild(heart);
      }

      let idx = 0;
      function showNext() {
        if (idx < sentences.length) {
          const span = document.createElement("span");
          span.className = "line";
          span.textContent = sentences[idx];
          messagesDiv.innerHTML = "";
          messagesDiv.appendChild(span);
          idx++;
          setTimeout(showNext, 4200);
        } else {
          messagesDiv.innerHTML = "";
          const heartContainer = document.createElement("div");
          heartContainer.className = "heart-container";
          messagesDiv.appendChild(heartContainer);

          const dots = 150;
          let i = 0;
          const draw = setInterval(() => {
            if (i >= dots) {
              clearInterval(draw);
              const finalText = document.createElement("div");
              finalText.className = "finalText";
              finalText.textContent = "üíñ Ch√∫c c√°c b·∫°n n·ªØ 20/10 vui v·∫ª v√† h·∫°nh ph√∫c üíñ";
              messagesDiv.appendChild(finalText);
              return;
            }
            const angle = (Math.PI * 2 * i) / dots;
            const x = 16 * Math.pow(Math.sin(angle), 3);
            const y = 13 * Math.cos(angle) - 5 * Math.cos(2*angle) - 2 * Math.cos(3*angle) - Math.cos(4*angle);
            const dot = document.createElement("div");
            dot.className = "heart-dot";
            dot.textContent = "‚ù§";
            dot.style.left = 300 + x * 20 + "px";
            dot.style.top  = 250 - y * 20 + "px";
            heartContainer.appendChild(dot);
            i++;
          }, 40);
        }
      }
      showNext();
    });
  </script>
</body>
</html>